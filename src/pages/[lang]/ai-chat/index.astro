---
import MainLayout from "~/layouts/main.astro"
import { getLanguagePaths } from "~/utils/langs"

export function getStaticPaths() {
  return getLanguagePaths()
}

const lang = Astro.params.lang as string
---

<MainLayout title={lang === "zh" ? "AIå¯¹è¯" : "AI Chat"} description={lang === "zh" ? "ä¸Ether AIè¿›è¡Œå®æ—¶å¯¹è¯" : "Real-time conversations with Ether AI"}>
  <div class="max-w-4xl mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8 text-center">
      {lang === "zh" ? "ğŸ¤– AI æ™ºèƒ½å¯¹è¯" : "ğŸ¤– AI Chat Interface"}
    </h1>
    
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6">
      <div class="text-center mb-6">
        <p class="text-gray-600 dark:text-gray-400">
          {lang === "zh" 
            ? "æ¬¢è¿ä½¿ç”¨Ether AIï¼æˆ‘å¯ä»¥å¸®æ‚¨å›ç­”é—®é¢˜ã€æ¢è®¨ç§‘å­¦æ¦‚å¿µï¼Œæˆ–è¿›è¡Œæ·±åº¦å¯¹è¯ã€‚" 
            : "Welcome to Ether AI! I can help answer questions, explore scientific concepts, or engage in deep conversations."
          }
        </p>
      </div>
      
      <div id="chat-container" class="min-h-[400px] max-h-[600px] overflow-y-auto border rounded-lg p-4 mb-4 bg-gray-50 dark:bg-gray-900">
        <div class="space-y-4">
          <div class="flex items-start space-x-3">
            <div class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold">
              AI
            </div>
            <div class="bg-blue-100 dark:bg-blue-900 p-3 rounded-lg max-w-md">
              <p class="text-sm">
                {lang === "zh" 
                  ? "æ‚¨å¥½ï¼æˆ‘æ˜¯Ether AIã€‚è¯·é—®ä»Šå¤©æˆ‘å¯ä»¥ä¸ºæ‚¨åšäº›ä»€ä¹ˆï¼Ÿæ‚¨å¯ä»¥é—®æˆ‘å…³äºç§‘å­¦ã€é‡å­ç‰©ç†ã€äººå·¥æ™ºèƒ½æˆ–ä»»ä½•æ‚¨æ„Ÿå…´è¶£çš„è¯é¢˜ã€‚" 
                  : "Hello! I'm Ether AI. How can I assist you today? You can ask me about science, quantum physics, AI, or any topic that interests you."
                }
              </p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="flex space-x-2">
        <input 
          type="text" 
          id="chat-input"
          placeholder={lang === "zh" ? "åœ¨æ­¤è¾“å…¥æ‚¨çš„é—®é¢˜..." : "Type your question here..."}
          class="flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
          onkeypress="if(event.key==='Enter') sendMessage()"
        />
        <button 
          onclick="sendMessage()"
          class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors"
        >
          {lang === "zh" ? "å‘é€" : "Send"}
        </button>
      </div>
    </div>
    
    <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6">
      <h2 class="text-xl font-semibold mb-4">
        {lang === "zh" ? "ğŸ”¬ æ¢ç´¢ä¸»é¢˜" : "ğŸ”¬ Explore Topics"}
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="space-y-2">
          <button onclick="askQuestion('quantum-physics')" class="w-full text-left p-3 bg-white dark:bg-gray-800 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
            <div class="font-medium">{lang === "zh" ? "é‡å­ç‰©ç†å­¦" : "Quantum Physics"}</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">
              {lang === "zh" ? "æ¢ç´¢é‡å­åŠ›å­¦çš„å¥¥ç§˜" : "Explore quantum mechanics mysteries"}
            </div>
          </button>
          <button onclick="askQuestion('ai-consciousness')" class="w-full text-left p-3 bg-white dark:bg-gray-800 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
            <div class="font-medium">{lang === "zh" ? "AIä¸æ„è¯†" : "AI & Consciousness"}</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">
              {lang === "zh" ? "äººå·¥æ™ºèƒ½çš„å“²å­¦æ€è€ƒ" : "Philosophical aspects of AI"}
            </div>
          </button>
        </div>
        <div class="space-y-2">
          <button onclick="askQuestion('human-behavior')" class="w-full text-left p-3 bg-white dark:bg-gray-800 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
            <div class="font-medium">{lang === "zh" ? "äººç±»è¡Œä¸ºå­¦" : "Human Behavior"}</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">
              {lang === "zh" ? "ç†è§£äººæ€§ä¸ç¤¾ä¼šåŠ¨åŠ›å­¦" : "Understanding human nature & social dynamics"}
            </div>
          </button>
          <button onclick="askQuestion('music-science')" class="w-full text-left p-3 bg-white dark:bg-gray-800 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
            <div class="font-medium">{lang === "zh" ? "éŸ³ä¹ä¸ç§‘å­¦" : "Music & Science"}</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">
              {lang === "zh" ? "éŸ³ä¹ä¸­çš„æ•°å­¦ä¸ç‰©ç†" : "Mathematics & physics in music"}
            </div>
          </button>
        </div>
      </div>
    </div>
  </div>
</MainLayout>

<script>
  let chatContainer;
  let chatInput;
  
  document.addEventListener('DOMContentLoaded', function() {
    chatContainer = document.getElementById('chat-container');
    chatInput = document.getElementById('chat-input');
  });

  function sendMessage() {
    const input = chatInput;
    const message = input.value.trim();
    
    if (!message) return;
    
    // Add user message
    addMessage(message, 'user');
    input.value = '';
    
    // Simulate AI response (in a real app, this would call an AI API)
    setTimeout(() => {
      const responses = {
        en: [
          "That's a fascinating question! Based on my understanding of quantum physics and human behavior patterns, I'd say...",
          "Interesting perspective! From Bernard's research in cognitive psychology and quantum mechanics...",
          "Great question! This touches on some fundamental concepts in both science and philosophy...",
          "I appreciate your curiosity! This relates to some of the core themes Bernard explores in his work..."
        ],
        zh: [
          "è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰è¶£çš„é—®é¢˜ï¼æ ¹æ®æˆ‘å¯¹é‡å­ç‰©ç†å­¦å’Œäººç±»è¡Œä¸ºæ¨¡å¼çš„ç†è§£...",
          "å¾ˆæœ‰æ„æ€çš„è§‚ç‚¹ï¼æ ¹æ®ä¼¯çº³å¾·åœ¨è®¤çŸ¥å¿ƒç†å­¦å’Œé‡å­åŠ›å­¦æ–¹é¢çš„ç ”ç©¶...",
          "å¥½é—®é¢˜ï¼è¿™æ¶‰åŠåˆ°ç§‘å­¦å’Œå“²å­¦çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µ...",
          "æˆ‘å¾ˆæ¬£èµæ‚¨çš„å¥½å¥‡å¿ƒï¼è¿™ä¸ä¼¯çº³å¾·åœ¨å…¶ä½œå“ä¸­æ¢ç´¢çš„ä¸€äº›æ ¸å¿ƒä¸»é¢˜ç›¸å…³..."
        ]
      };
      
      const lang = document.documentElement.lang || 'en';
      const langResponses = responses[lang] || responses.en;
      const response = langResponses[Math.floor(Math.random() * langResponses.length)];
      
      addMessage(response, 'ai');
    }, 1000);
  }
  
  function addMessage(message, sender) {
    const messageDiv = document.createElement('div');
    messageDiv.className = 'flex items-start space-x-3';
    
    if (sender === 'user') {
      messageDiv.innerHTML = `
        <div class="bg-gray-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold">
          U
        </div>
        <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg max-w-md">
          <p class="text-sm">${message}</p>
        </div>
      `;
    } else {
      messageDiv.innerHTML = `
        <div class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold">
          AI
        </div>
        <div class="bg-blue-100 dark:bg-blue-900 p-3 rounded-lg max-w-md">
          <p class="text-sm">${message}</p>
        </div>
      `;
    }
    
    chatContainer.appendChild(messageDiv);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }
  
  function askQuestion(topic) {
    const questions = {
      'quantum-physics': {
        en: "Can you explain quantum entanglement and its implications for our understanding of reality?",
        zh: "æ‚¨èƒ½è§£é‡Šä¸€ä¸‹é‡å­çº ç¼ åŠå…¶å¯¹æˆ‘ä»¬ç†è§£ç°å®çš„æ„ä¹‰å—ï¼Ÿ"
      },
      'ai-consciousness': {
        en: "What are your thoughts on artificial consciousness and the possibility of machines developing true awareness?",
        zh: "æ‚¨å¯¹äººå·¥æ„è¯†å’Œæœºå™¨å‘å±•çœŸæ­£æ„è¯†çš„å¯èƒ½æ€§æœ‰ä»€ä¹ˆçœ‹æ³•ï¼Ÿ"
      },
      'human-behavior': {
        en: "How do social dynamics and individual psychology interact to shape human behavior?",
        zh: "ç¤¾ä¼šåŠ¨åŠ›å­¦å’Œä¸ªä½“å¿ƒç†å­¦å¦‚ä½•ç›¸äº’ä½œç”¨æ¥å¡‘é€ äººç±»è¡Œä¸ºï¼Ÿ"
      },
      'music-science': {
        en: "What is the relationship between mathematical patterns in music and our emotional responses?",
        zh: "éŸ³ä¹ä¸­çš„æ•°å­¦æ¨¡å¼ä¸æˆ‘ä»¬çš„æƒ…æ„Ÿååº”ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ"
      }
    };
    
    const lang = document.documentElement.lang || 'en';
    const question = questions[topic][lang] || questions[topic].en;
    
    chatInput.value = question;
    sendMessage();
  }
</script>